<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="copyright" content="www.apicloud.com" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>孔孟之道--首页推荐</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" href="../css/swiper.min.css">
    <link rel="stylesheet" href="../css/iconfont/iconfont.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <style>
 html, body { min-height: 100%; position: relative; } .fr { float: right; } .fl { float: left; } .clear { clear: both; } .mt20 { margin-top: 20px; } .p20px { padding: 0 20px; } .row { display: -webkit-box; display: -webkit-flex; } .col { -webkit-box-flex:
1; -webkit-flex: 1; flex: 1; margin: 0 5px; position: relative; } .hdivider { width: 100%; height: 1px; background-color: #b2b2b2; } /*轮播图 */ .swiper-container img { width: 100%; } /* 八大导航 */ .nav { /*padding: 8px;*/ margin-bottom: 20px; display: -webkit-box;
display: -webkit-flex; } .navbar { -webkit-box-flex: 1; -webkit-flex: 1; flex: 1; position: relative; /*float: left; padding: 4px; box-sizing: border-box; background-clip: content-box;*/ text-align: center; font-size: 12px; color: #1a1a1a; } .navbar img
{ width: 60px; height: 60px; display: block; text-align: center; margin: 0 auto; /*padding-top: 20px;*/ } /*.navbar-item-hov { background-color: rgba(254, 242, 228, 0.7); }*/ .navbar-item-active { color: #D43C33; } /* 听单推荐 */ .hot>.hotC { position: relative;
float: left; padding: 4px; box-sizing: border-box; background-clip: content-box; text-align: center; font-size: 20px; /*padding-top:10px;*/ } .sectionTitle { margin-bottom: 10px; } .sectionTitle .TD_div { font-size: 16px; color: #1a1a1a; } .sectionTitle
.more { color: #666; font-size: 12px; } .hotC>img { width: 100%; height: auto; } .listtitle { font-size: 10px; color: #000; } /*个性化推荐 */ .egret-flex-item { display: -webkit-box; -webkit-box-align: center; height: 100px; } .egret-flex-item-logo { max-width:
80px; min-width: 80px; /*margin-left: 0.5em; margin-right: 0.2em;*/ -webkit-box-flex: 1; -webkit-box-align: center; } .egret-flex-item-logo img { height: 60px; width: 60px; -webkit-box-align: center; vertical-align: top; } .egret-flex-item-shelf { overflow:
hidden; -webkit-box-flex: 2; -webkit-box-align: center; } .egret-flex-item-shelf div { text-overflow: ellipsis; white-space: nowrap; overflow: hidden; margin-top: 5px; } .egret-flex-item-shelf .egret-flex-item-shelf01 .span1 { font-size: 13px; color:
#000; } .egret-flex-item-shelf .egret-flex-item-shelf02 .span2 { font-size: 12px; color: #ff3db8; margin: 0 5px; } .egret-flex-item-shelf .egret-flex-item-shelf01 .span3 { font-size: 12px; color: #ccc; } .egret-flex-item-shelf .egret-flex-item-shelf02
{ font-size: 12px; color: #666; } .egret-flex-item-shelf .egret-flex-item-shelf02 span { font-size: 15px; color: #000; } .egret-flex-item-shelf03 div { float: left; line-height: 20px; margin: 5px 3px; } .egret-flex-item-shelf03 div img { width: 12px;
height: 12px; line-height: 12px; margin: 0 2px; } .egret-flex-item-shelf03 div span { line-height: 18px; vertical-align: top; font-size: 11px; color: #b2b2b2; } .egret-flex-item-shelf .egret-flex-item-redclassify { color: #E03F40; border: 1px solid #E03F40;
font-size: inherit; padding: 0 0.1em; border-radius: 1px; margin-right: 5px; box-sizing: border-box; }
        /*.fmbtnhover { background: #D8D9DA; }*/
    </style>
</head>

<body>
    <!-- 轮播图 -->
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide" onclick="fnMachineXiangqingWin();">
                <img src="../image/frame0101cover/frame0101cover01.jpg" alt="">
            </div>
            <div class="swiper-slide" onclick="fnMachineXiangqingWin();">
                <img src="../image/frame0101cover/frame0101cover02.jpg" alt="">
            </div>
        </div>
    </div>

    <!-- 八大导航 -->
    <div class="nav">
        <div class="navbar" tapmode="navbar-item-hov" onclick="fnGuoxueWin();"><img src="../image/KM_goxue.png" alt="">国学馆</div>
        <div class="navbar" tapmode="navbar-item-hov" onclick="fnReadWin();"><img src="../image/KM_langsong.png" alt="">朗诵</div>
        <div class="navbar" tapmode="navbar-item-hov" onclick="fnListenWin();"><img src="../image/KM_listen.png" alt="">熏听</div>
        <div class="navbar" tapmode="navbar-item-hov" onclick="fnBillboard()"><img src="../image/KM_bangdan.png" alt="">榜单</div>
        <!-- <div class="clear"></div> -->
    </div>
    <!-- 2 热门推荐 -->
    <div class="p20px">
        <div class="sectionTitle">
            <span class="TD_div fl">听单推荐</span>
            <span class="fr more" onclick="fnRecommendWin();">更多</span>
            <div class="clear"></div>
        </div>
        <div class="hot" id="hot">

            <!-- <div class="hotC" onclick="fnSingleWin();">
                <img src="../image/frame0101cover/frame0101cover06.png" alt="" >
                <div class="listtitle">经典诗歌</div>
            </div> -->

            <div class="clear"></div>

        </div>
    </div>
    <div class="p20px">
        <div class="sectionTitle">
            <span class="TD_div fl">喜马拉雅</span>
            <span class="fr more" onclick="fnRecommendWin();">更多</span>
            <div class="clear"></div>
        </div>
        <div class="hot" id="喜马拉雅">

            <!-- <div class="hotC" onclick="fnSingleWin();">
                <img src="../image/frame0101cover/frame0101cover06.png" alt="" >
                <div class="listtitle">经典诗歌</div>
            </div> -->

            <div class="clear"></div>

        </div>
    </div>
    <!-- 3 个性化推荐 -->
    <div class="p20px">
        <div class="sectionTitle mt20" onclick="">
            <span class="TD_div fl">优秀作品</span>
            <span class="fr more" onclick="fnBillboard();">更多</span>
            <div class="clear"></div>
        </div>
        <div class="egret-flex-item" tapmode="fmbtnhover" onclick="fnOpenPlay()">
            <div class="egret-flex-item-logo">
                <img src="../image/frame0101cover/frame0101cover16.png" alt="" class="">
            </div>
            <div class="egret-flex-item-shelf">
                <div class="egret-flex-item-shelf01">
                    <span class="span1 fl">作品：<span>《沁园春·雪》</span></span>
                    <!-- <span class="span2 iconfont icon-nv fl"></span> -->
                    <!-- <img src="../image/js.png" alt="" class="fl"> -->
                    <span class="span3 fr">昨天21.30</span>
                </div>
                <div class="egret-flex-item-shelf02">唐嫣<span class="span2 iconfont icon-nv "></span><span><img src="../image/js.png" alt="" class="fl"></span></div>
                <div class="egret-flex-item-shelf03">
                    <div><img src="../image/play_icon.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_dx.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_zf.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_dz.png" alt=""><span>100</span></div>
                </div>
            </div>
        </div>
        <div class="hdivider"></div>
        <div class="egret-flex-item" tapmode="fmbtnhover" onclick="fnOpenPlay()">
            <div class="egret-flex-item-logo">
                <img src="../image/frame0101cover/frame0101cover16.png" alt="" class="">
            </div>
            <div class="egret-flex-item-shelf">
                <div class="egret-flex-item-shelf01">
                    <span class="span1 fl">作品：<span>《沁园春·雪》</span></span>
                    <!-- <span class="span2 iconfont icon-nv fl"></span> -->
                    <!-- <img src="../image/js.png" alt="" class="fl"> -->
                    <span class="span3 fr">昨天21.30</span>
                </div>
                <div class="egret-flex-item-shelf02">唐嫣<span class="span2 iconfont icon-nv "></span><span><img src="../image/js.png" alt="" class="fl"></span></div>
                <div class="egret-flex-item-shelf03">
                    <div><img src="../image/play_icon.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_dx.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_zf.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_dz.png" alt=""><span>100</span></div>
                </div>
            </div>
        </div>
        <div class="hdivider"></div>
        <div class="egret-flex-item" tapmode="fmbtnhover" onclick="fnOpenPlay()">
            <div class="egret-flex-item-logo">
                <img src="../image/frame0101cover/frame0101cover16.png" alt="" class="">
            </div>
            <div class="egret-flex-item-shelf">
                <div class="egret-flex-item-shelf01">
                    <span class="span1 fl">作品：<span>《沁园春·雪》</span></span>
                    <!-- <span class="span2 iconfont icon-nv fl"></span> -->
                    <!-- <img src="../image/js.png" alt="" class="fl"> -->
                    <span class="span3 fr">昨天21.30</span>
                </div>
                <div class="egret-flex-item-shelf02">唐嫣<span class="span2 iconfont icon-nv "></span><span><img src="../image/js.png" alt="" class="fl"></span></div>
                <div class="egret-flex-item-shelf03">
                    <div><img src="../image/play_icon.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_dx.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_zf.png" alt=""><span>100</span></div>
                    <div><img src="../image/KM_dz.png" alt=""><span>100</span></div>
                </div>
            </div>
        </div>
        <div class="hdivider"></div>
    </div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/index.js"></script>
<script type="text/javascript" src="../script/swiper.min.js"></script>

</html>
<script type="text/javascript">
    apiready = function() {
      // alert(JSON.stringify(qqziliao));
        // api.parseTapmode()
        fnTingdanTuijian();
        fnInitSwiper();
        fnXiMaLaYaTingDan();
        var qqziliao = api.pageParam.qqziliao;
        // var navbars = $api.domAll('.navbar');

        // for(var i=0; i < 8 ;i++){
        //   navbars.item(i).style.width = frameWidth /4 + "px";
        //   navbars.item(i).style.height = frameWidth/4 * 1.1 + "px";
        // };



    }
    //接口  推荐听单
    function fnXiMaLaYaTingDan(){
      var ximalaya = null;
      var ximalaya = api.require('ximalaya');
      var param = {
        appkey : "b1a6bbd778241a858035fe57cc9594ba",
        appsecret : "a9f599565e8ff557b9bd11608f350220 "
      };
      ximalaya.initXmly(param, function(ret, err) {
        if (ret)
          alert(JSON.stringify(ret.message));
        else
        console.log(JSON.stringify(err));
          alert(JSON.stringify(err));
      });
      function getSearchedTracks() {
				var param = {
					keyword : "爱情",
					categoryid : 1,
					page : 1,
					pagesize : 3
				};
				ximalaya.getSearchedTracks(param, function(ret, err) {
					if (ret)
						alert(JSON.stringify(ret.total_count));
					else
						alert(JSON.stringify(err));
				});
			}
      // var param = {
      //     //appkey: "a2bef6e953c529b6ac0b656a32079ecf",
      //     appsecret: "e1f6e1927fdab1ef1a8de1997557b6db"
      // };
      // ximalaya.initXmly(param, function(ret, err) {
      //     if (ret)
      //         alert(JSON.stringify(ret));
      //     else
      //         alert(JSON.stringify(err));
      // });

    }
    //接口  推荐听单
    function fnTingdanTuijian(){
      api.ajax({
          url: 'http://47.100.11.38/kongmeng/thirdParty/search_playlist_by_name.php?page=0&size=6',
          method: 'get',
      }, function(ret, err) {
          if (ret) {
              //alert(JSON.stringify(ret));
              fnTingdanZhanshi(ret);
          } else {
              alert(JSON.stringify(err));
          }
      });
  }
        //接口  推荐听单
    function fnTingdanTuijian() {
        api.ajax({
            url: 'http://47.100.11.38/kongmeng/thirdParty/search_playlist_by_name.php?page=0&size=6',
            method: 'get',
        }, function(ret, err) {
            if (ret) {
                //alert(JSON.stringify(ret));
                fnTingdanZhanshi(ret);
            } else {
                alert(JSON.stringify(err));
            }
        });

    }
    //接口  听单展示
    function fnTingdanZhanshi(data_) {
        var stylelist = $api.byId('hot');
        var html = '';
        for (var i = 0; i < 6; i++) {
            html += '<div class="hotC" onclick="fnSingleWin(' + data_.data[i].id + ');"><img src="' + data_.data[i].logoMiddle + '" alt=""><div class="listtitle"> ' + data_.data[i].name + '</div></div>';

        }
        $api.html(stylelist, html);
        var frameWidth = api.frameWidth;
        var frameHeight = api.frameHeight;
        var hotCs = $api.domAll('.hotC');
        for (var j = 0; j < 6; j++) {
            hotCs.item(j).style.width = (frameWidth - 40) / 3 + "px";
            hotCs.item(j).style.height = (frameWidth - 40) / 3 * 1.224 + "px";
        };

    }

    function fnSingleWin(tuijiantingdanid) {
        api.openWin({
            name: 'single',
            url: './single.html',
            pageParam: {
                name: 'test',
                tuijiantingdanid: tuijiantingdanid
            }
        });

    }

    function fnRecommendWin() {
        api.openWin({
            name: 'recommend',
            url: './recommend.html',
            pageParam: {
                name: 'test'
            }
        });

    }

    function fnInitSwiper() {
        var mySwiper = new Swiper('.swiper-container', {
            autoplay: true, //可选选项，自动滑动
            loop: true
        });
    };

    function fnGuoxueWin() {
        api.openWin({
            name: 'guoxue',
            url: './guoxue.html',
            pageParam: {
                name: 'test'
            }
        });

    }
    //打开熏听页面
    function fnListenWin() {
        api.openWin({
            name: 'listenTo',
            url: './listen_to.html',
            pageParam: {
                name: 'test'
            }
        });

    }
    // 打开榜单页面
    function fnBillboard() {
        api.openWin({
            name: 'billBoard',
            url: './bill_board.html',
        });
    }

    function fnReadWin() {
        api.openWin({
            name: 'read',
            url: './read.html',
            pageParam: {
                name: 'test'
            }
        });

    }
    //作品列表进入播放页面
    function fnOpenPlay() {
        api.openWin({
            name: 'play',
            url: './play.html',
        });

    }

    function fnMachineXiangqingWin() {
        api.openWin({
            name: 'machine_xiangqing',
            url: './machine_xiangqing.html',
            pageParam: {
                name: 'test'
            }
        });

    }
</script>
