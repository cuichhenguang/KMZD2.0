<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>孔孟之道--首页我的</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <style>
        html,
        body {
            background-color: #f2f2f2;
        }

        .p20pxs {
            padding: 0 13px;
        }

        .border_r {
            border-right: 1px dotted #ccc;
        }

        .border_b {
            border-bottom: 1px solid #ccc;
        }

        .fl {
            float: left;
        }

        .fr {
            float: right;
        }

        .index_header {
            width: 100%;
            background-color: #89211b;
        }

        .index_header_div {
            width: 100%;
            height: 248px;
            position: relative;
        }

        .index_header_img {
            width: 75px;
            margin: 0 auto;
            border-radius: 37.5px;
        }

        .index_header_img img {
            width: 100%;
            border-radius: 37.5px;
        }

        .index_header_mvp {
            position: absolute;
            top: 20px;
            right: 37px;
            width: 74px;
        }

        .index_header_mvp img {
            width: 100%;
        }

        .wode_bg {
            width: 100%;
            height: 107px;
            background-image: url(../image/wode_bg.png);
            background-size: 100%;
            background-repeat: no-repeat;
        }

        .wode_bg div {
            color: #fff;
            text-align: center;

        }

        .index_header_mvp_p {
            font-size: 13px;
            height: 30px;
            line-height: 30px;
        }

        .index_header_mvp_span {
            font-size: 12px;
        }

        .p13px {
            padding: 0 13px;
            width: 100%;
        }

        .index_header_bg {
            width: 100%;
            height: 70px;
            background-color: #f2f2f2;
        }

        .row {
            width: 100%;
            border-radius: 10px;
            background: #fff;
        }

        .index_header_san {
            width: 100%;
            height: 120px;
            position: absolute;
            bottom: 0;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
        }

        .index_header_sans {
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
            position: relative;
            text-align: center;
            line-height: 40px;
        }
        .index_header_sans div{
          font-size: 12px;
        }
        .index_header_sans div span {
            color: red;
        }

        .p20px {
            padding: 20px 0;
            display: flex;
            display: -webkit-box;
            display: -webkit-flex;
            height: 80px;
        }

        .index_name {
            width: 100%;
            margin: 10px 0;
        }

        .index_name_li {
            width: 100%;
            height: 91px;
            border-radius: 5px;
            background: #fff;
        }

        .index_name_div {
            line-height: 45px;
            height: 45px;
            overflow: hidden;
        }

        .index_name_div_img {
            height: 45px;
            line-height: 45px;
        }

        .index_name_div_img img {
          width: 20px;
              /* height: 30px; */
              padding: 13px;

        }

        .index_name_div_imgr {
            height: 45px;
            line-height: 45px;
        }

        .index_name_div_imgr img {
            width: 9px;
            padding: 15px;
        }
        .index_name_div_span {
          font-size: 12px;
        }
    </style>
</head>

<body>
    <div class="index_header">
        <div class="index_header_div">
            <div id="imgs" class="index_header_img" onclick="fnUpimg();">
              <img src="../image/KM_tx.png" alt="">
            </div>
            <div class="wode_bg">
                <div class="index_header_mvp_p" onclick="fnPrompt()" id="username">嘿！我不是朝天椒</div>
                <div class="index_header_mvp_span">[ 童声 ]</div>
            </div>
            <div class="index_header_san">
                <div class="p13px">
                    <div class="row">
                        <div class="p20px">
                            <div class="index_header_sans border_r">
                                <div>学分</div>
                                <div><span>123456</span>分</div>
                            </div>
                            <div class="index_header_sans border_r" onclick="fnOpenMyCare();">
                                <div>关注</div>
                                <div><span>9999</span>个</div>
                            </div>
                            <div class="index_header_sans" onclick="fnPersonalWin();">
                                <div>作品</div>
                                <div><span>9999</span>个</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="index_header_bg"></div>
        </div>
    </div>
    <div class="index_name">
        <div class="p20pxs">
            <div class="index_name_li">
                <div class="index_name_div border_b" onclick="dialogBox_alert2();">
                    <div class="index_name_div_img fl"><img src="../image/index_wdcj.png" alt=""></div>
                    <span class="index_name_div_span fl">我的成就</span>
                    <div class="index_name_div_imgr fr"><img src="../image/index_y.png" alt=""></div>
                </div>
                <div class="index_name_div" onclick="fnCollectionWin();">
                    <div class="index_name_div_img fl"><img src="../image/index_wdsc.png" alt=""></div>
                    <span class="index_name_div_span fl">我的收藏</span>
                    <div class="index_name_div_imgr fr"><img src="../image/index_y.png" alt=""></div>
                </div>
            </div>
        </div>
    </div>
    <div class="index_name">
        <div class="p20pxs">
            <div class="index_name_li">
                <div class="index_name_div border_b" onclick="openHistorys();">
                    <div class="index_name_div_img fl"><img src="../image/index_lsjl.png" alt=""></div>
                    <span class="index_name_div_span fl">历史记录</span>
                    <div class="index_name_div_imgr fr"><img src="../image/index_y.png" alt=""></div>
                </div>
                <div class="index_name_div" onclick="openMessage();">
                    <div class="index_name_div_img fl"><img src="../image/index_wdtxl.png" alt=""></div>
                    <span class="index_name_div_span fl">我的消息</span>
                    <div class="index_name_div_imgr fr"><img src="../image/index_y.png" alt=""></div>
                </div>
            </div>
        </div>
    </div>
    <div class="index_name">
        <div class="p20pxs">
            <div class="index_name_li">
                <div class="index_name_div border_b" onclick="fnFeedbackWin()">
                    <div class="index_name_div_img fl"><img src="../image/index_bzyfk.png" alt=""></div>
                    <span class="index_name_div_span fl">帮助与反馈</span>
                    <div class="index_name_div_imgr fr"><img src="../image/index_y.png" alt=""></div>
                </div>
                <div class="index_name_div" onclick="fnSetWin();">
                    <div class="index_name_div_img fl"><img src="../image/index_sz.png" alt=""></div>
                    <span class="index_name_div_span fl">设置</span>
                    <div class="index_name_div_imgr fr"><img src="../image/index_y.png" alt=""></div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
    apiready = function() {
        // 优化点击事件
        var qqziliao = api.pageParam.qqziliao;
        fnYongHuTouXiang(qqziliao);
        fnUserName(qqziliao);
        //alert(JSON.stringify(qqziliao));
        api.parseTapmode();
    }
    function fnYongHuTouXiang(qqziliao){
      var QQusername = qqziliao.figureurl_qq_2;
      //alert(JSON.stringify(QQusername));
      var stylelist = $api.byId('imgs');
      var html = '<img src="' + QQusername + '" alt="">';
      $api.html(stylelist, html);

    }
    function fnUserName(qqziliao){
      var stylelist = $api.byId('username');
      var QQusername = qqziliao.nickname;
      var html = QQusername;
      $api.html(stylelist, html);

    }
    function fnPrompt() {
      api.prompt({
          buttons: ['确定', '取消']
      }, function(ret, err){
          if( ret ){
               alert( JSON.stringify( ret ) );
          }else{
               alert( JSON.stringify( err ) );
          }
      });

    }
    function fnFeedbackWin() {
        api.openWin({
            name: 'feedback',
            url: './feedback.html',
            pageParam: {
                name: 'test'
            }
        });

    }

    function fnUpimg() {
      var dialogBox = api.require('dialogBox');
      dialogBox.actionMenu({
          rect: {
              h: 200
          },
          texts: {
              cancel: '取消'
          },
          items: [{
              text: '相机',
              icon: 'widget://image/xiangji.png'
          }, {
              text: '相册',
              icon: 'widget://image/xiangce.png'
          }],
          styles: {
              bg: '#FFF',
              corner: 6,
              column: 2,
              itemText: {
                  color: '#000',
                  size: 14,
                  marginT: 10
              },
              itemIcon: {
                  size: 30
              },
              cancel: {
                  bg: '#fff',
                  color: '#333',
                  h: 55,
                  size: 14
              }
          },
          tapClose: true
      }, function(ret) {
          var texts = ret.eventType;
          var index = ret.index;
          if (texts == "cancel") {
              dialogBox.close({
                  dialogName: 'alert'
              });
          } else if (index == 0) {
              alert('相机')
              api.getPicture({
                  sourceType: 'camera',
                  encodingType: 'jpg',
                  mediaValue: 'pic',
                  destinationType: 'url',
                  allowEdit: true,
                  quality: 50,
                  targetWidth: 100,
                  targetHeight: 100,
                  saveToPhotoAlbum: false
              }, function(ret, err) {
                  if (ret) {
                      alert(JSON.stringify(ret));
                  } else {
                      alert(JSON.stringify(err));
                  }
              });
              dialogBox.close({
                  dialogName: 'alert'
              });
          } else if (index == 1) {
              alert('相册')
              api.getPicture({
                  sourceType: 'album',
                  encodingType: 'jpg',
                  mediaValue: 'pic',
                  destinationType: 'url',
                  allowEdit: true,
                  quality: 50,
                  targetWidth: 100,
                  targetHeight: 100,
                  saveToPhotoAlbum: false
              }, function(ret, err) {
                  if (ret) {
                      alert(JSON.stringify(ret));
                  } else {
                      alert(JSON.stringify(err));
                  }
              });
              dialogBox.close({
                  dialogName: 'alert'
              });
          }
      });

    }

    function fnPersonalWin() {
        api.openWin({
            name: 'personal',
            url: './personal.html',
            pageParam: {
                name: 'test'
            }
        });
    }

    function fnCollectionWin() {
        api.openWin({
            name: 'collection',
            url: './collection.html',
            pageParam: {
                name: 'test'
            }
        });
    }
    //打开关注页面
    function fnOpenMyCare() {
        api.openWin({
            name: 'myCare',
            url: './my_care.html',
            pageParam: {
                name: 'test'
            }
        });

    }
    //打开消息页面
    function openMessage() {
        api.openWin({
            name: 'message',
            url: './message.html',
        });
    };

    function openHistorys() {
        api.openWin({
            name: 'historys',
            url: './historys.html',
        });
    }

    function dialogBox_alert2() {
        var dialogBox = api.require('dialogBox');
        dialogBox.alert({
            texts: {
                content: '您获得的成就为：童声！',
                leftBtnTitle: '确定'
            },
            styles: {
                bg: '#fff',
                corner: 6,
                w: 280,
                content: {
                    color: '#000',
                    size: 18
                },
                left: {
                    marginB: 15,
                    marginL: 15,
                    w: 250,
                    h: 40,
                    corner: 20,
                    color: "#fff",
                    bg: '#CDCDCD',
                    size: 16
                }
            },
            tapClose: true
        }, function(ret) {
            if (ret.eventType == 'left') {
                dialogBox.close({
                    dialogName: 'alert'
                });
            }
        });
    }

    function fnSetWin() {
        api.openWin({
            name: 'set',
            url: './set.html',
            pageParam: {
                name: 'test'
            }
        });

    }
</script>
